# 9장. 스프링 프로젝트 시작하기

# 라이브러리 관리와 빌드 툴

> 가장 어려운 부분은 필요한 프레임워크 모듈과 라이브러리 파일을 선택해서 빌드 패스에 넣어주는 일 !
> 

## 📚 라이브러리 관리

- 오픈소스 사용의 증가로 수십 개씩 의존 라이브러리가 필요한 경우가 많음
- 라이브러리마다 여러 버전이 있어 어떤 버전을 사용할지도 어려움
- 라이브러리의 조합을 만들다 보면 같은 라이브러리의 다른 버전이 동시에 필요하기도 함
- **이름이 같지만 구현이 다른 클래스가 있다면 비정상적으로 동작할 수 있음**
    - 재패키징 : 한쪽 버전의 클래스를 다른 패키지로 옮겨서 서로 구별되는 클래스로 만들기

## 📚 라이브러리 선정

- 불필요한 라이브러리는 처음부터 추가하지 않을 것
- 사용 기술이나 기능이 변경돼서 불필요해진 라이브러리도 바로 제거할 것
- 라이브러리 파일이 많을수록 애플리케이션 모듈 파일 크기가 커지고 라이브러리 관리가 어려워짐

## 🌱 스프링 모듈의 두 가지 이름

> spring-core-3.0.7.RELEASE.jar
org.springframework.core-3.0.7.RELEASE.jar
> 
- 두 파일은 동일한 파일이다.
- 전자는 maven에서 사용하는 명명 규칙
- 후자는 OSGi의 모듈 명명 규칙을 따른 것

# 애플리케이션 아키텍처

## 🧮 계층형 아키텍처

유연한 경계를 만들어두고 분리하거나 모아주는 작업이 필요하다.

- 애플리케이션을 구성하는 오브젝트들을 비슷한 성격과 책임을 가진 것들끼리 묶는다.
    - DAO, Service, Domain, …
- 성격이 다른 것은 아키텍처 레벨에서 분리하는 것이 좋다.
- 분리된 오브젝트는 독자적으로 개발 및 테스트가 가능하다.

### 3계층 아키텍처

- 데이터 액세스
- 서비스
- 프레젠테이션

### 설계 원칙

- 각 계층은 자신의 책임에만 충실할 것
- 계층 사이의 호출은 인터페이스를 통할 것
- 계층 사이의 경계나 그 관계에 직접적으로 관여하지 않을 것

## 📀 데이터 중심 아키텍처

- 거대한 서비스 계층을 만들게 됨
- DAO 공유를 제외하면 코드 중복이 많아짐
- 테스트 하기 수월함
- 계층 간 결합도가 큼

## 🧩 오브젝트 중심 아키텍처

- 도메인 모델을 반영하는 오브젝트 구조를 만들어두고 각 계층 사이에서 정보를 전송하는 데 사용
- 객체지향 분석 / 모델링의 결과로 나오는 도메인 모델을 활용
- 관계형 DB의 엔티티 구조와 유사한 형태일 가능성

### 도메인 오브젝트

- 비즈니스 로직의 구현이 간단하고 명확하다.
- SQL을 매번 만들어 사용하는 경우 성능 면에서 손해를 본다.
- 특정 정보만 필요한 경우에도 오브젝트로 만들어서 가져오는 경우 낭비가 된다.
    - DAO와 비즈니스 로직의 결합도가 높아진다.
    - lazy loading, 별도 오브젝트 사용 등으로 개선 가능
    - ORM 기술을 사용하는 것이 이상적
- 빈약 vs 풍성
    - 빈약 : 정보만 담겨있고 기능이 없는 오브젝트 (서비스 계층에 비즈니스 로직)
    - 풍성 : 객체지향의 특징을 살리고 서비스 계층이 간결해짐

### 도메인 오브젝트를 독립적인 계층으로 만들려면 ?

- 도메인 오브젝트가 도메인 계층을 벗어나서도 사용될 것인지 결정
    1. 모든 계층에서 도메인 오브젝트를 사용한다.
    2. 도메인 오브젝트는 도메인 계층을 벗어나지 못하게 한다.
        - DTO 사용

# 스프링 애플리케이션을 위한 아키텍처 설계

## 🧮 계층형 아키텍처

- 프리젠테이션 계층
    - SpringMVC
- 서비스 계층
    - POJO
    - AOP 적용
- 데이터 액세스 계층
    - ORM 활용

## ℹ️ 정보 전송 아키텍처

- 빈약한 도메인 오브젝트 방식으로 시작
- 도메인 오브젝트에 단순한 기능이라도 추가하려고 노력하기
- 애플리케이션의 정보를 일관된 형태로 유지하기

## 📶 상태 관리와 빈 스코프

- 서버 기반 애플리케이션은 stateless
- 장시간 진행되는 작업 정보를 유지할 방안
    - 클라이언트에 전달
    - 파일 시스템
    - 데이터 그리드
    - DB
    - 세션

## 🐣 서드파티 프레임워크/라이브러리

- 스프링이 직접 지원하지 않는 기술도 스프링 스타일의 접근 방식을 따르도록 하자.
- 스프링이 지원하는 기술
    - 해당 기술을 스프링의 DI 패턴을 따라 사용할 수 있다.
    - 스프링의 서비스 추상화가 적용됐다.
    - 스프링이 지지하는 프로그래밍 모델을 적용했다.
    - 템플릿/콜백이 지원된다.
