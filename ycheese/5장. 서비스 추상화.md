# 5장. 서비스 추상화
### 필드 추가

- 상수 값이 필요하다면 enum을 적극 활용하자
    - 범위 밖의 값을 넣을 위험이 없다.
    - DB에는 int 값을, 코드에서는 오브젝트를 안전하게 사용할 수 있다.
    

### 사용자 수정 기능

JDBC 개발에서 기본 작업을 제외하고 가장 많은 실수가 일어나는 곳 ? → SQL 문장 !

- JdbcTemplate의 update()가 돌려주는 리턴 값을 확인한다.
    - 영향 받은 row의 개수
- 테스트를 보완한다.
    - 원하는 사용자 외의 정보는 변경되지 않았는지

### 트랜잭션

더 이상 나눌 수 없는 단위 작업

- 중간에 예외가 발생하면 원래대로 돌려놔야 한다.

### 트랜잭션 경계 설정

**모든 트랜잭션은 시작 지점과 끝 지점이 있다 !**

- 시작 지점은 하나
- 끝나는 지점은 둘
    - 롤백, 커밋

**🤔 비즈니스 로직 내에 트랜잭션 경계 설정의 문제점**

- JdbcTemplate 활용 불가
    - 리소스의 깔끔한 처리 불가
- DAO와 비즈니스 로직 메서드에 Connection 파라미터 전달 필요
    - 멀티스레드 환경에서 서로 덮어쓰는 상황 발생 가능
    - 데이터 액세스 기술에 독립적일 수 없음 (DAO)
